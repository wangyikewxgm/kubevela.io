(self.webpackChunkkubevela_io=self.webpackChunkkubevela_io||[]).push([[1290],{3905:function(e,n,r){"use strict";r.d(n,{Zo:function(){return u},kt:function(){return m}});var t=r(67294);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function i(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?o(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function l(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var c=t.createContext({}),s=function(e){var n=t.useContext(c),r=n;return e&&(r="function"==typeof e?e(n):i(i({},n),e)),r},u=function(e){var n=s(e.components);return t.createElement(c.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},d=t.forwardRef((function(e,n){var r=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=s(r),m=a,f=d["".concat(c,".").concat(m)]||d[m]||p[m]||o;return r?t.createElement(f,i(i({ref:n},u),{},{components:r})):t.createElement(f,i({ref:n},u))}));function m(e,n){var r=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=d;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var s=2;s<o;s++)i[s]=r[s];return t.createElement.apply(null,i)}return t.createElement.apply(null,r)}d.displayName="MDXCreateElement"},84350:function(e,n,r){"use strict";r.r(n),r.d(n,{frontMatter:function(){return i},metadata:function(){return l},toc:function(){return c},default:function(){return u}});var t=r(22122),a=r(19756),o=(r(67294),r(3905)),i={title:"Terraform"},l={unversionedId:"platform-engineers/terraform",id:"platform-engineers/terraform",isDocsHomePage:!1,title:"Terraform",description:"\u5728\u672c\u6587\u6863\u4e2d\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u963f\u91cc\u4e91\u7684 RDS\uff08\u5173\u7cfb\u6570\u636e\u5e93\u670d\u52a1\uff09\u548c\u963f\u91cc\u4e91\u7684 OSS\uff08\u5bf9\u8c61\u5b58\u50a8\u7cfb\u7edf\uff09\u4f5c\u4e3a\u793a\u4f8b\uff0c\u5c55\u793a\u5982\u4f55\u5728\u5e94\u7528\u7a0b\u5e8f\u90e8\u7f72\u4e2d\u542f\u7528\u4e91\u670d\u52a1\u3002",source:"@site/i18n/zh/docusaurus-plugin-content-docs/current/platform-engineers/terraform.md",sourceDirName:"platform-engineers",slug:"/platform-engineers/terraform",permalink:"/zh/docs/next/platform-engineers/terraform",editUrl:"https://github.com/oam-dev/kubevela/edit/master/docs/zh/platform-engineers/terraform.md",version:"current",lastUpdatedBy:"Wei (\u6bb5\u5c11)",lastUpdatedAt:1624354854,formattedLastUpdatedAt:"2021/6/22",frontMatter:{title:"Terraform"},sidebar:"docs",previous:{title:"\u6982\u8ff0",permalink:"/zh/docs/next/platform-engineers/cloud-services"},next:{title:"Crossplane",permalink:"/zh/docs/next/platform-engineers/crossplane"}},c=[{value:"\u51c6\u5907 Terraform \u63a7\u5236\u5668",id:"\u51c6\u5907-terraform-\u63a7\u5236\u5668",children:[{value:"\u5e94\u7528\u63d0\u4f9b\u5546\u51ed\u636e",id:"\u5e94\u7528\u63d0\u4f9b\u5546\u51ed\u636e",children:[]},{value:"\u6ce8\u518c<code>alibaba-rds</code>\u7ec4\u4ef6",id:"\u6ce8\u518calibaba-rds\u7ec4\u4ef6",children:[]},{value:"\u6ce8\u518c<code>alibaba-oss</code>\u7ec4\u4ef6",id:"\u6ce8\u518calibaba-oss\u7ec4\u4ef6",children:[]}]}],s={toc:c};function u(e){var n=e.components,r=(0,a.Z)(e,["components"]);return(0,o.kt)("wrapper",(0,t.Z)({},s,r,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"\u5728\u672c\u6587\u6863\u4e2d\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u963f\u91cc\u4e91\u7684 RDS\uff08\u5173\u7cfb\u6570\u636e\u5e93\u670d\u52a1\uff09\u548c\u963f\u91cc\u4e91\u7684 OSS\uff08\u5bf9\u8c61\u5b58\u50a8\u7cfb\u7edf\uff09\u4f5c\u4e3a\u793a\u4f8b\uff0c\u5c55\u793a\u5982\u4f55\u5728\u5e94\u7528\u7a0b\u5e8f\u90e8\u7f72\u4e2d\u542f\u7528\u4e91\u670d\u52a1\u3002"),(0,o.kt)("p",null,"\u8fd9\u4e9b\u4e91\u670d\u52a1\u7531 Terraform \u63d0\u4f9b\u3002"),(0,o.kt)("h2",{id:"\u51c6\u5907-terraform-\u63a7\u5236\u5668"},"\u51c6\u5907 Terraform \u63a7\u5236\u5668"),(0,o.kt)("details",null,(0,o.kt)("p",null,"\u4ece\u6700\u65b0\u7684 ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/oam-dev/terraform-controller/releases"},"\u53d1\u5e03\u5217\u8868")," \u4e0b\u8f7d\u6700\u65b0\u7684\u56fe\u8868\uff0c\u5982 ",(0,o.kt)("inlineCode",{parentName:"p"},"terraform-controller-chart-0.1.8.tgz")," \u5e76\u5b89\u88c5\u5b83\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"$ helm install terraform-controller terraform-controller-0.1.8.tgz\nNAME: terraform-controller\nLAST DEPLOYED: Mon Apr 26 15:55:35 2021\nNAMESPACE: default\nSTATUS: deployed\nREVISION: 1\nTEST SUITE: None\n")),(0,o.kt)("h3",{id:"\u5e94\u7528\u63d0\u4f9b\u5546\u51ed\u636e"},"\u5e94\u7528\u63d0\u4f9b\u5546\u51ed\u636e"),(0,o.kt)("p",null,"\u901a\u8fc7\u5e94\u7528 Terraform Provider \u51ed\u636e\uff0c\u53ef\u4ee5\u5bf9 Terraform \u63a7\u5236\u5668\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u4ee5\u90e8\u7f72\u548c\u7ba1\u7406\u4e91\u8d44\u6e90\u3002"),(0,o.kt)("p",null,"\u5982\u4f55\u7533\u8bf7\u963f\u91cc\u4e91\u6216 AWS \u7684 Provider \u8bf7\u53c2\u8003",(0,o.kt)("a",{parentName:"p",href:"https://github.com/oam-dev/terraform-controller/blob/master/getting-started.md"},"Terraform\u63a7\u5236\u5668\u5165\u95e8"),"\u3002")),(0,o.kt)("h3",{id:"\u6ce8\u518calibaba-rds\u7ec4\u4ef6"},"\u6ce8\u518c",(0,o.kt)("inlineCode",{parentName:"h3"},"alibaba-rds"),"\u7ec4\u4ef6"),(0,o.kt)("p",null,"\u6ce8\u518c ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/oam-dev/kubevela/tree/master/docs/examples/terraform/cloud-resource-provision-and-consume/ComponentDefinition-alibaba-rds.yaml"},"alibaba-rds")," \u5230 KubeVela\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: core.oam.dev/v1alpha2\nkind: ComponentDefinition\nmetadata:\n  name: alibaba-rds\n  annotations:\n    definition.oam.dev/description: Terraform configuration for Alibaba Cloud RDS object\n    type: terraform\nspec:\n  workload:\n    definition:\n      apiVersion: terraform.core.oam.dev/v1beta1\n      kind: Configuration\n  schematic:\n    terraform:\n      configuration: |\n        module "rds" {\n          source = "terraform-alicloud-modules/rds/alicloud"\n          engine = "MySQL"\n          engine_version = "8.0"\n          instance_type = "rds.mysql.c1.large"\n          instance_storage = "20"\n          instance_name = var.instance_name\n          account_name = var.account_name\n          password = var.password\n        }\n\n        output "DB_NAME" {\n          value = module.rds.this_db_instance_name\n        }\n        output "DB_USER" {\n          value = module.rds.this_db_database_account\n        }\n        output "DB_PORT" {\n          value = module.rds.this_db_instance_port\n        }\n        output "DB_HOST" {\n          value = module.rds.this_db_instance_connection_string\n        }\n        output "DB_PASSWORD" {\n          value = module.rds.this_db_instance_port\n        }\n\n        variable "instance_name" {\n          description = "RDS instance name"\n          type = string\n          default = "poc"\n        }\n\n        variable "account_name" {\n          description = "RDS instance user account name"\n          type = "string"\n          default = "oam"\n        }\n\n        variable "password" {\n          description = "RDS instance account password"\n          type = "string"\n          default = "Xyfff83jfewGGfaked"\n        }\n\n')),(0,o.kt)("h3",{id:"\u6ce8\u518calibaba-oss\u7ec4\u4ef6"},"\u6ce8\u518c",(0,o.kt)("inlineCode",{parentName:"h3"},"alibaba-oss"),"\u7ec4\u4ef6"),(0,o.kt)("p",null,"\u6ce8\u518c ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/oam-dev/kubevela/tree/master/docs/examples/terraform/cloud-resource-provision-and-consume/ComponentDefinition-alibaba-oss.yaml"},"alibaba-oss")," \u5230 KubeVela\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: core.oam.dev/v1alpha2\nkind: ComponentDefinition\nmetadata:\n  name: alibaba-oss\n  annotations:\n    definition.oam.dev/description: Terraform configuration for Alibaba Cloud OSS object\n    type: terraform\nspec:\n  workload:\n    definition:\n      apiVersion: terraform.core.oam.dev/v1beta1\n      kind: Configuration\n  schematic:\n    terraform:\n      configuration: |\n        resource "alicloud_oss_bucket" "bucket-acl" {\n          bucket = var.bucket\n          acl = var.acl\n        }\n\n        output "BUCKET_NAME" {\n          value = "${alicloud_oss_bucket.bucket-acl.bucket}.${alicloud_oss_bucket.bucket-acl.extranet_endpoint}"\n        }\n\n        variable "bucket" {\n          description = "OSS bucket name"\n          default = "vela-website"\n          type = string\n        }\n\n        variable "acl" {\n          description = "OSS bucket ACL, supported \'private\', \'public-read\', \'public-read-write\'"\n          default = "private"\n          type = string\n        }\n\n\n')))}u.isMDXComponent=!0}}]);